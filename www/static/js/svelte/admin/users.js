!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/admin/users",e):t["admin/users"]=e()}(this,function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function s(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function o(t){return document.createTextNode(t)}function a(){return Object.create(null)}function u(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function h(t,e){return t!=t?e==e:t!==e}function d(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var s=n[r];s.__calling||(s.__calling=!0,s.call(this,e),s.__calling=!1)}}function f(t){return t?this._state[t]:this._state}function l(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&r(e.current[t],e.previous&&e.previous[t])})}function _(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function p(t){for(;t&&t.length;)t.shift()()}var m={destroy:u,get:f,fire:d,observe:l,on:_,set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,p(this.root._beforecreate),p(this.root._oncreate),p(this.root._aftercreate),this.root._lock=!1)},teardown:u,_recompute:t,_set:function(t){var n=this._state,r={},s=!1;for(var i in t)this._differs(t[i],n[i])&&(r[i]=s=!0);s&&(this._state=e(e({},n),t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:c};function v(t,e,n){return 2===arguments.length&&(n=e,e="include"),function(t,e,n,r,s){var i={method:e,body:r,mode:"cors",credentials:n};window.fetch(t,i).then(function(t){return 200!==t.status?new Error(t.statusText):t.text()}).then(function(t){try{return JSON.parse(t)}catch(e){return console.warn("malformed json input",t),t}}).then(s).catch(function(t){console.error(t)})}(t,"GET",e,null,n)}function g(e,a){var u,c,h,d,f,l,_,p,m,v,g,y,b,N,w,C,x,E,I,A,k,P,T,j,L,H,O=a.user,S=(a.each_value,a.user_index,O.Id),M=O.Name||"",R=O.Email,$=O.Role,B=O.CreatedAt;return{c:function(){u=i("tr"),c=i("td"),h=i("a"),d=o(S),l=o("\n\t\t\t\t"),_=i("td"),p=o(M),m=o("\n\t\t\t\t"),v=i("td"),g=o(R),y=o("\n\t\t\t\t"),b=i("td"),N=i("i"),w=o("\n\t\t\t\t\t"),C=o($),x=o("\n\t\t\t\t"),E=i("td"),I=o(B),A=o("\n\t\t\t\t"),k=i("td"),P=i("a"),j=o("\n\t\t\t\t"),(L=i("td")).innerHTML='<a href="#" class="do" data-action="editAction"><i class="icon-pencil" title="edit"></i></a>\n\t\t\t\t\t<a href="#" class="do" data-action="resetAction"><i class="icon-envelope" title="reset the password and send a mail"></i></a>\n\t\t\t\t\t<a href="#" class="do" data-action="removeAction"><i class="icon-trash" title="delete"></i></a>',this.h()},h:function(){h.href=f="/admin/users/"+O.Id,c.className="id out",_.className="name out",v.className="email out",N.className="icon-user",N.title="Editor",E.className="creation out",P.href=T="/admin/chart/by/"+O.Id,k.className="center",L.className="actions",u.className="user editor ",u.dataset.id=H=O.Id},m:function(t,e){r(u,t,e),n(c,u),n(h,c),n(d,h),n(l,u),n(_,u),n(p,_),n(m,u),n(v,u),n(g,v),n(y,u),n(b,u),n(N,b),n(w,b),n(C,b),n(x,u),n(E,u),n(I,E),n(A,u),n(k,u),n(P,k),n(j,u),n(L,u)},p:function(t,e){O=e.user,e.each_value,e.user_index,t.users&&S!==(S=O.Id)&&(d.data=S),t.users&&f!==(f="/admin/users/"+O.Id)&&(h.href=f),t.users&&M!==(M=O.Name||"")&&(p.data=M),t.users&&R!==(R=O.Email)&&(g.data=R),t.users&&$!==($=O.Role)&&(C.data=$),t.users&&B!==(B=O.CreatedAt)&&(I.data=B),t.users&&T!==(T="/admin/chart/by/"+O.Id)&&(P.href=T),t.users&&H!==(H=O.Id)&&(u.dataset.id=H)},u:function(){s(u)},d:t}}function y(t){!function(t,e){t._handlers=a(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e({users:[],count:0},t.data);var u=this;t.root||(this._oncreate=[]),this._fragment=function(t,a){var u,c,h,d,f,l,_,p,m,v,y,b,N,w;function C(e){var n=t.get();t.set({count:n.count+1})}for(var x=a.users,E=[],I=0;I<x.length;I+=1)E[I]=g(0,e(e({},a),{each_value:x,user:x[I],user_index:I}));return{c:function(){u=i("h1"),c=o("Hello world ("),h=o(a.count),d=o(")"),f=o("\n\n"),(l=i("button")).textContent="increment",_=o("\n\n"),p=i("hr"),m=o("\n\n"),v=i("ul"),y=i("table"),(b=i("thead")).innerHTML='<tr><th><a href="?sort=id">#</a></th>\n\t\t\t\t<th><a href="?sort=name">Name</a></th>\n\t\t\t\t<th><a href="?sort=email">Sign-In</a></th>\n\t\t\t\t<th>Status</th>\n\t\t\t\t<th><a href="?sort=created_at">Created at</a></th>\n\t\t\t\t<th class="center">Charts</th>\n\t\t\t\t<th>Actions</th></tr>',N=o("\n\t\t"),w=i("tbody");for(var t=0;t<E.length;t+=1)E[t].c();this.h()},h:function(){var t,e;t="click",e=C,l.addEventListener(t,e,!1),w.className="users",y.className="table users"},m:function(t,e){r(u,t,e),n(c,u),n(h,u),n(d,u),r(f,t,e),r(l,t,e),r(_,t,e),r(p,t,e),r(m,t,e),r(v,t,e),n(y,v),n(b,y),n(N,y),n(w,y);for(var s=0;s<E.length;s+=1)E[s].m(w,null)},p:function(t,n){t.count&&(h.data=n.count);var r=n.users;if(t.users){for(var s=0;s<r.length;s+=1){var i=e(e({},n),{each_value:r,user:r[s],user_index:s});E[s]?E[s].p(t,i):(E[s]=g(0,i),E[s].c(),E[s].m(w,null))}for(;s<E.length;s+=1)E[s].u(),E[s].d();E.length=r.length}},u:function(){s(u),s(f),s(l),s(_),s(p),s(m),s(v);for(var t=0;t<E.length;t+=1)E[t].u()},d:function(){var t,e;t="click",e=C,l.removeEventListener(t,e,!1),function(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}(E)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;v("/api/users",function(e){"ok"===e.status&&(console.log(e.data),t.set({users:e.data}))})}).call(u),u.fire("update",{changed:{count:1,users:1},current:u._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),p(this._oncreate))}function b(t,n){this._observers={pre:a(),post:a()},this._handlers={},this._dependents=[],this._computed=a(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?h:c}return e(y.prototype,m),e(b.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=a();function s(i){if(t[i])throw new Error("Cyclical dependency detected");if(!r[i]){r[i]=!0;var o=e[i];o&&(t[i]=!0,o.deps.forEach(s),n.push(o))}}for(var i in this._computed)t=a(),s(i)},compute:function(t,e,n){var r,s=this,i={deps:e,update:function(i,o,a){var u=e.map(function(t){return t in o&&(a=!0),i[t]});if(a){var c=n.apply(null,u);s._differs(c,r)&&(r=c,o[t]=!0,i[t]=r)}}};i.update(this._state,{},!0),this._computed[t]=i,this._sortComputedProperties()},fire:d,get:f,observe:l,on:_,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(e){t(e.current,e.changed)})},set:function(t){var n=this._state,r=this._changed={},s=!1;for(var i in t){if(this._computed[i])throw new Error("'"+i+"' is a read-only property");this._differs(t[i],n[i])&&(r[i]=s=!0)}if(s){this._state=e(e({},n),t);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,r);this.fire("state",{changed:r,current:this._state,previous:n});var a=this._dependents.slice();for(o=0;o<a.length;o+=1){var u=a[o],c={};s=!1;for(var h=0;h<u.props.length;h+=1){var d=u.props[h];d in r&&(c["$"+d]=this._state[d],s=!0)}s&&u.component.set(c)}this.fire("update",{changed:r,current:this._state,previous:n})}}}),{App:y,store:new b({}),data:{}}});
